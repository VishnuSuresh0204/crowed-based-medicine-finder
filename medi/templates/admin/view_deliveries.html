{% extends 'admin/base.html' %}
{% block title %}All Deliveries{% endblock %}
{% block content %}

<div class="glass-card">
    <h2 class="text-gradient" style="margin-bottom:2rem; font-size:2rem; font-weight: 700;">All Deliveries</h2>
    
    <div style="overflow-x:auto;">
        <table style="width:100%; border-collapse: separate; border-spacing: 0;">
            <thead>
                <tr>
                    <th style="border-top-left-radius: 10px;">Order ID</th>
                    <th>Pharmacy</th>
                    <th>User</th>
                    <th>Prescription</th>
                    <th>Delivery Boy</th>
                    <th>Status</th>
                    <th style="border-top-right-radius: 10px;">Delivery Status</th>
                </tr>
            </thead>
            <tbody>
                {% for b in bookings %}
                <tr style="transition: background 0.3s;">
                    <td style="color:white; font-weight:500;">#{{ b.id }}</td>
                    <td class="text-muted">{{ b.medicine.pharmacy.name }}</td>
                    <td class="text-muted">{{ b.user.name }}</td>
                    <td>
                        {% if b.prescription %}
                        <a href="{{ b.prescription.url }}" target="_blank" style="color: #fbbf24; text-decoration: none; font-size: 0.9rem; display: flex; align-items: center; gap: 4px;">
                            <i class="fas fa-file-prescription"></i> View
                        </a>
                        {% else %}
                        <span class="text-muted" style="font-size: 0.85rem;">-</span>
                        {% endif %}
                    </td>
                    <td class="text-muted">
                        {% if b.delivery_boy %}
                            {{ b.delivery_boy.name }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td><span class="badge badge-neutral">{{ b.status }}</span></td>
                    <td>
                        <span style="color: #6366f1; font-weight: 500;">{{ b.get_delivery_status_display }}</span>
                        {% if b.user_confirmed %}
                        <span style="color:#4ade80; font-size: 0.85rem; margin-left: 5px;"><i class="fas fa-check-circle"></i></span>
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" style="text-align:center; padding:3rem; color: var(--muted);">No bookings found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
