{% extends 'admin/base.html' %}
{% block title %}Delivery Personnel - {{ pharmacy.name }}{% endblock %}
{% block content %}

<div style="margin-bottom: 2rem;">
    <a href="/manage_pharmacy/" class="text-muted hover-text-primary" style="display: inline-flex; align-items: center; gap: 0.5rem; font-weight: 500; text-decoration: none;">
        <i class="fas fa-arrow-left"></i> Back to Pharmacies
    </a>
</div>

<div class="glass-card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <div>
            <h2 class="text-gradient" style="margin:0; font-size:2rem; font-weight: 700;">Delivery Personnel</h2>
            <p class="text-muted" style="margin-top: 5px;">Staff associated with <strong>{{ pharmacy.name }}</strong></p>
        </div>
        <div class="glass-card" style="padding: 0.5rem 1rem; background: rgba(56, 189, 248, 0.1); border: 1px solid rgba(56, 189, 248, 0.2);">
            <i class="fas fa-users text-primary"></i> Total: {{ delivery_boys.count }}
        </div>
    </div>
    
    <div style="overflow-x:auto;">
        <table style="width:100%; border-collapse: separate; border-spacing: 0;">
            <thead>
                <tr>
                    <th style="border-top-left-radius: 10px;">ID</th>
                    <th>Name</th>
                    <th>Contact Info</th>
                    <th>Username</th>
                    <th style="border-top-right-radius: 10px;">Status</th>
                </tr>
            </thead>
            <tbody>
                {% for db in delivery_boys %}
                <tr style="transition: background 0.3s;">
                    <td style="color:var(--primary); font-family: monospace;">#DB-{{ db.id }}</td>
                    <td style="color:white; font-weight:500;">{{ db.name }}</td>
                    <td>
                        <div style="display: flex; flex-direction: column; gap: 4px;">
                            <span class="text-bright"><i class="fas fa-phone-alt" style="font-size: 0.8rem; margin-right: 5px; opacity: 0.6;"></i> {{ db.phone }}</span>
                            <span class="text-muted" style="font-size: 0.85rem;"><i class="fas fa-envelope" style="font-size: 0.8rem; margin-right: 5px; opacity: 0.6;"></i> {{ db.email }}</span>
                        </div>
                    </td>
                    <td class="text-muted">{{ db.login.username }}</td>
                    <td>
                        {% if db.status == 'active' %}
                            <span class="badge badge-success"><i class="fas fa-check-circle"></i> Active</span>
                        {% else %}
                            <span class="badge badge-warning">{{ db.status|title }}</span>
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center text-muted" style="padding:3rem;">
                        <i class="fas fa-user-slash" style="font-size: 2.5rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                        <p>No delivery personnel registered for this pharmacy yet.</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
