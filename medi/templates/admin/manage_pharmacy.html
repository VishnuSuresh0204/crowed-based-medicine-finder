{% extends 'admin/base.html' %}
{% block title %}Manage Pharmacies{% endblock %}
{% block content %}

<div class="glass-card">
    <h2 class="text-gradient" style="margin-bottom:1.5rem; font-size:2rem; font-weight: 700;">Manage Pharmacies</h2>
    
    <div style="overflow-x:auto;">
        <table style="width:100%; border-collapse: separate; border-spacing: 0;">
            <thead>
                <tr>
                    <th style="border-top-left-radius: 10px;">Name</th>
                    <th>Place</th>
                    <th>Contact</th>
                    <th>Status</th>
                    <th>Image</th>
                    <th style="border-top-right-radius: 10px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for p in pharmacies %}
                <tr style="transition: background 0.3s;">
                    <td style="color:white; font-weight:500;">
                        <div style="display:flex; align-items:center; gap:0.5rem;">
                            <div style="width: 30px; height: 30px; background: rgba(255, 255, 255, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700;">{{ p.name|slice:":1" }}</div>
                            {{ p.name }}
                        </div>
                    </td>
                    <td class="text-muted">{{ p.place }}</td>
                    <td class="text-muted">{{ p.contact_number }}</td>
                    <td>
                        {% if p.status == 'approve' %}
                            <span class="badge badge-success">Active</span>
                        {% elif p.status == 'block' %}
                            <span class="badge badge-danger">Blocked</span>
                        {% elif p.status == 'reject' %}
                            <span class="badge badge-danger">Rejected</span>
                        {% else %}
                            <span class="badge badge-warning">Pending</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if p.image %}
                            <img src="{{ p.image.url }}" alt="Img" style="width: 40px; height: 40px; object-fit: cover; border-radius: 8px; border:1px solid rgba(255,255,255,0.1); box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                        {% else %}
                            <span class="text-muted" style="font-size: 0.8rem;">-</span>
                        {% endif %}
                    </td>
                    <td>
                        <div style="display: flex; gap: 0.5rem;">
                        {% if p.status == 'pending' %}
                            <a href="/manage_pharmacy/?id={{ p.id }}&action=approve" class="btn btn-primary" style="padding: 0.3rem 0.6rem; font-size: 0.75rem; background: #22c55e; border: none; box-shadow: none;">Approve</a>
                            <a href="/manage_pharmacy/?id={{ p.id }}&action=reject" class="btn btn-primary" style="padding: 0.3rem 0.6rem; font-size: 0.75rem; background: #ef4444; border: none; box-shadow: none;">Reject</a>
                        {% elif p.status == 'approve' %}
                            <a href="/manage_pharmacy/?id={{ p.id }}&action=block" class="btn btn-outline" style="padding: 0.3rem 0.6rem; font-size: 0.75rem; border-color: rgba(239, 68, 68, 0.3); color: #fca5a5;">Block</a>
                        {% elif p.status == 'block' %}
                             <a href="/manage_pharmacy/?id={{ p.id }}&action=unblock" class="btn btn-outline" style="padding: 0.3rem 0.6rem; font-size: 0.75rem; border-color: rgba(99, 102, 241, 0.3); color: #818cf8;">Unblock</a>
                        {% endif %}
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
